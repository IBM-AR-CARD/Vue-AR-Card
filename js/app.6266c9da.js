(function(e){function t(t){for(var r,o,n=t[0],c=t[1],l=t[2],u=0,m=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,n=1;n<a.length;n++){var c=a[n];0!==i[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},i={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var d=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("85ec"),i=a.n(r);i.a},"4aa1":function(e,t,a){"use strict";var r=a("4f32"),i=a.n(r);i.a},"4f32":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("4de4"),a("fb6a"),a("d3b7"),a("25f0"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)},s=[],o={name:"App",components:{}},n=o,c=(a("034f"),a("2877")),l=Object(c["a"])(n,i,s,!1,null,null,null),d=l.exports,u=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"screen-main"}},[e._m(0),a("div",{staticClass:"right"},["login"==e.state?a("div",{staticClass:"container"},[a("div",{staticClass:"container-title"},[a("h1",{staticClass:"md-title md-headline"},[e._v("IBM AR Business Card")]),a("h2",[e._v("Welcome back! Please login to your account.")]),a("p",{staticClass:"error-message"},[e._v(e._s(e.errorMsg))])]),a("form",{staticClass:"container-inputfield"},[a("md-field",[a("label",[e._v("Email")]),a("md-input",{model:{value:e.loginEmail,callback:function(t){e.loginEmail=t},expression:"loginEmail"}})],1),a("md-field",[a("label",[e._v("Password")]),a("md-input",{attrs:{type:"password"},model:{value:e.loginPassword,callback:function(t){e.loginPassword=t},expression:"loginPassword"}})],1)],1),a("div",{staticClass:"loginstate"},[a("md-checkbox",{model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}},[e._v("Remember me")])],1),a("div",{staticClass:"container-buttons"},[a("a",{staticClass:"buttons-login",on:{click:function(t){return e.onLogin()}}},[e._v("Log in")]),a("a",{staticClass:"buttons-signup",on:{click:function(t){return e.toRegister()}}},[e._v("Sign up")])])]):e._e(),"register"==e.state?a("div",{staticClass:"container"},[a("div",{staticClass:"main-container"},[a("div",{staticClass:"container-title"},[a("h1",{staticClass:"md-title md-headline"},[e._v("IBM AR Business Card")]),a("h2",[e._v("Register now to sync your scan history and favourites, also creating your own AR card!")]),a("p",{staticClass:"error-message"},[e._v(e._s(e.errorMsg))])]),a("form",{staticClass:"container-inputfield"},[a("md-field",[a("label",[e._v("UserName")]),a("md-input",{model:{value:e.registerUserName,callback:function(t){e.registerUserName=t},expression:"registerUserName"}})],1),a("md-field",[a("label",[e._v("Email")]),a("md-input",{model:{value:e.registerEmail,callback:function(t){e.registerEmail=t},expression:"registerEmail"}})],1),a("md-field",[a("label",[e._v("Password")]),a("md-input",{attrs:{type:"password"},model:{value:e.registerPassword,callback:function(t){e.registerPassword=t},expression:"registerPassword"}})],1),a("md-field",[a("label",[e._v("Comfirm Password")]),a("md-input",{attrs:{type:"password"},model:{value:e.registerPasswordConfirm,callback:function(t){e.registerPasswordConfirm=t},expression:"registerPasswordConfirm"}})],1)],1),a("a",{staticClass:"container-buttons-skip",on:{click:function(t){return e.onRegister()}}},[e._v("Sign up")]),a("a",{staticClass:"buttons-Already",on:{click:function(t){return e.toLogin()}}},[e._v("Already have an account? Sign in.")])])]):e._e(),"forgot"==e.state?a("div",{staticClass:"container"},[a("div",{staticClass:"container-title"},[a("h1",{staticClass:"md-title md-headline"},[e._v("IBM AR Business Card")]),a("h2",[e._v("Enter your email and we send you a password reset link.")]),a("p",{staticClass:"error-message"},[e._v(e._s(e.errorMsg))])]),a("md-field",[a("label",[e._v("Email")]),a("md-input")],1),a("div",{staticClass:"container-buttons"},[a("a",{staticClass:"buttons-login",on:{click:function(t){return e.sendRequest()}}},[e._v("Send request")])])],1):e._e()])])},f=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"left"},[r("img",{staticClass:"left-logo",attrs:{src:a("cf05")}})])}],g=(a("96cf"),a("1da1")),p={name:"home",methods:{toRegister:function(){this.errorMsg="",this.state="register"},toLogin:function(){this.errorMsg="",this.state="login"},toForgot:function(){this.state="forgot"},sendRequest:function(){console.log("send request")},onLogin:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post(e.$globalConfig.baseUrl+"/user/login",{email:e.loginEmail,password:e.loginPassword});case 3:a=t.sent.data,e.errorMsg="",e.$globalData.userData._id=a._id,e.$globalData.userData.token=a.token,e.$cookies.set("_id",a._id,"2147483647"),e.$cookies.set("token",a.token,"2147483647"),e.remember?(e.$cookies.set("email",e.loginEmail,"2147483647"),e.$cookies.set("password",e.loginPassword,"2147483647"),e.$cookies.set("remember",!0,"2147483647")):(e.$cookies.remove("email"),e.$cookies.remove("password")),e.$router.push("MyCards"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),e.errorMsg=t.t0.response.data.error;case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},onRegister:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.errorMsg="",e.agree){t.next=6;break}return e.errorMsg="please agree the term and conditions",t.abrupt("return");case 6:if(e.registerPassword||e.registerPassword==e.registerPasswordConfirm){t.next=9;break}return e.errorMsg="password does not match",t.abrupt("return");case 9:return t.prev=9,t.next=12,e.$http.post(e.$globalConfig.baseUrl+"/user/register",{username:e.registerUserName,email:e.registerEmail,password:e.registerPassword});case 12:return e.errorMsg="",t.next=15,e.$http.post(e.$globalConfig.baseUrl+"/user/login",{email:e.registerEmail,password:e.registerPassword});case 15:a=t.sent.data,e.$globalData.userData._id=a._id,e.$globalData.userData.token=a.token,e.$cookies.set("_id",a._id,"2147483647"),e.$cookies.set("token",a.token,"2147483647"),e.$cookies.set("email",e.registerEmail,"2147483647"),e.$cookies.set("password",e.registerPassword,"2147483647"),e.$cookies.set("remember",!0,"2147483647"),e.$router.push("MyCards"),t.next=30;break;case 26:t.prev=26,t.t0=t["catch"](9),console.log(t.t0),e.errorMsg=t.t0.response.data.error;case 30:case"end":return t.stop()}}),t,null,[[9,26]])})))()}},data:function(){return{state:"login",errorMsg:"",loginEmail:"",loginPassword:"",registerEmail:"",registerPasswordConfirm:"",registerPassword:"",registerUserName:"",remember:!1,agree:!0}},created:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loginEmail=null!==(t=this.$cookies.get("email"))&&void 0!==t?t:"",this.loginPassword=null!==(a=this.$cookies.get("password"))&&void 0!==a?a:"",this.remember=null!==(r="true"==this.$cookies.get("remember"))&&void 0!==r&&r;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},v=p,h=(a("d8cd"),a("d80b"),Object(c["a"])(v,m,f,!1,null,"7b38f486",null)),b=h.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("md-app",{staticStyle:{"background-color":"#F0F0F7 !important"},attrs:{"md-waterfall":"","md-mode":"fixed"}},[a("md-app-toolbar",{staticClass:"md-primary"},[a("md-button",{staticClass:"md-icon-button nav-left-menu-button",on:{click:function(t){e.showNavigation=!0}}},[a("md-icon",[e._v("menu")])],1),a("div",{staticClass:"md-toolbar-section-end"},[a("span",{staticClass:"toolbar-toprght-name"},[e._v(e._s(e.firstname)+" "+e._s(e.lastname))]),e.profile?a("img",{staticClass:"toolbar-toprght-icon",attrs:{src:e.profile},on:{click:function(t){e.showLogoutMessage=!0}}}):e._e(),a("div",[e.profile?e._e():a("md-icon",{staticClass:"toolbar-toprght-icon"},[e._v("person")])],1)])],1),a("md-app-drawer",{attrs:{"md-active":e.showNavigation,"md-swipeable":"","md-permanent":"full"},on:{"update:mdActive":function(t){e.showNavigation=t},"update:md-active":function(t){e.showNavigation=t}}},[a("md-toolbar",{staticClass:"md-transparent",attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title nav-title"},[e._v("IBM AR CARD")])]),a("md-list",{staticClass:"nav-list"},[a("md-list-item",{staticClass:"nav-list-item",class:{"nav-list-item-onselect":"profile"==e.state},on:{click:function(t){return e.toProfile()}}},[a("md-icon",{staticClass:"nav-list-icon",attrs:{color:"white"}},[e._v("person")]),a("span",{staticClass:"md-list-item-text nav-list-item-text"},[e._v("Profile")])],1),a("md-list-item",{staticClass:"nav-list-item",class:{"nav-list-item-onselect":"history"==e.state},on:{click:function(t){return e.toHistory()}}},[a("md-icon",{staticClass:"nav-list-icon",attrs:{color:"white"}},[e._v("history")]),a("span",{staticClass:"md-list-item-text nav-list-item-text"},[e._v("Scan history")])],1),a("md-list-item",{staticClass:"nav-list-item",class:{"nav-list-item-onselect":"favourite"==e.state},on:{click:function(t){return e.toFavourite()}}},[a("md-icon",{staticClass:"nav-list-icon",attrs:{color:"white"}},[e._v("favorite_outline")]),a("span",{staticClass:"md-list-item-text nav-list-item-text"},[e._v("Favourite")])],1)],1),a("md-list",{staticClass:"nav-list log-out-button"},[a("md-list-item",{staticClass:"nav-list-item",staticStyle:{"user-select":"none",cursor:"pointer"},attrs:{onclick:"window.location = 'http://ar-card.henryz.cc/'"}},[a("md-icon",{staticClass:"nav-list-icon",attrs:{color:"white"}},[e._v("system_update")]),a("span",{staticClass:"md-list-item-text nav-list-item-text"},[e._v("Get the App")])],1),a("md-list-item",{staticClass:"nav-list-item",on:{click:function(t){e.showLogoutMessage=!0}}},[a("md-icon",{staticClass:"nav-list-icon",attrs:{color:"white"}},[e._v("exit_to_app")]),a("span",{staticClass:"md-list-item-text nav-list-item-text"},[e._v("Log out")])],1)],1)],1),a("md-app-content",{staticClass:"md-scrollbar",staticStyle:{"background-color":"#F0F0F7 !important"}},[a(e.currentComponent,{tag:"component"}),a("md-snackbar",{attrs:{"md-duration":e.isInfinity?1/0:4e3,"md-active":e.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(t){e.showSnackbar=t},"update:md-active":function(t){e.showSnackbar=t}}},[a("span",[e._v(" "+e._s(e.isInfinity?"You haven't login, Please login":"Network Error. please retry or try to login again!")+" ")]),a("md-button",{staticClass:"retry-button",on:{click:function(t){e.isInfinity?e.toLogin():e.onRetry()}}},[e._v(e._s(e.isInfinity?"Login":"Retry"))])],1),a("md-dialog-confirm",{attrs:{"md-active":e.showLogoutMessage,"md-title":"Would you like to logout of the system?","md-confirm-text":"Logout","md-cancel-text":"Cancel"},on:{"update:mdActive":function(t){e.showLogoutMessage=t},"update:md-active":function(t){e.showLogoutMessage=t},"md-confirm":e.onConfirmLogout}}),a("md-dialog-alert",{attrs:{"md-active":e.logoutUnsuccess,"md-content":"Network error, please try again.","md-confirm-text":"OK"},on:{"update:mdActive":function(t){e.logoutUnsuccess=t},"update:md-active":function(t){e.logoutUnsuccess=t}}})],1)],1)],1)},y=[],w=(a("a4d3"),a("e01a"),a("4160"),a("159b"),a("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-card",{staticClass:"card-container-profile"},[a("md-card-header",[e.onEditName?e._e():a("div",{staticClass:"card-header-container"},[a("div",{staticClass:"md-title"},[a("h1",[e.firstname||e.lastname?e._e():a("div",{staticStyle:{display:"inline","font-size":"35px",opacity:"0.6"}},[e._v(" Click the pencil icon to edit your name ")]),e._v(" "+e._s(e._f("capitalize")(e.firstname))+" "+e._s(e._f("capitalize")(e.lastname))+" "),a("md-button",{staticClass:"md-icon-button name-icon-edit",on:{click:function(t){e.onEditName=!e.onEditName}}},[a("md-icon",[e._v("edit")])],1)],1),a("h2",[e._v("@"+e._s(e.username))])])]),e.onEditName?a("div",{staticClass:"card-header-container"},[a("div",{staticClass:"md-title col-2"},[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",[e._v("First Name")]),a("md-input",{model:{value:e.firstname,callback:function(t){e.firstname=t},expression:"firstname"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",[e._v("Last Name")]),a("md-input",{model:{value:e.lastname,callback:function(t){e.lastname=t},expression:"lastname"}})],1)],1),a("md-button",{staticClass:"md-icon-button name-icon-edit",on:{click:function(t){e.onEditName=!e.onEditName}}},[a("md-icon",[e._v("done_all")])],1)],1)])]):e._e()]),a("div",{staticClass:"top-detail-container"},[a("div",{staticClass:"col-2"},[a("md-card-content",{staticClass:"content-line"},[a("div",{staticStyle:{"min-width":"200px"}},[a("h3",[e._v("Profile Picture")]),a("p",{staticStyle:{opacity:"0.7"}},[e._v("Tap the photo to upload")])]),e.profile?a("input",{staticClass:"profile-image",attrs:{type:"image",src:e.profile},on:{click:function(t){return e.$refs.imageUpload.click()}}}):e._e(),e.profile?e._e():a("div",{on:{click:function(t){return e.$refs.imageUpload.click()}}},[a("md-icon",{staticClass:"profile-image md-size-4x"},[e._v("person")])],1),a("input",{ref:"imageUpload",staticStyle:{display:"none"},attrs:{type:"file",accept:".jpg, .png, .jpeg, .gif, .bmp, .tif, .tiff|image/*"},on:{change:function(t){return e.handleImageUpload()}}})]),a("md-card-content",{staticClass:"content-line"},[a("md-field",{staticClass:"on-select"},[a("label",{staticClass:"select-label"},[e._v("Gender")]),a("md-select",{model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}},[a("md-option",{attrs:{value:"0"}},[e._v("Male")]),a("md-option",{attrs:{value:"1"}},[e._v("Female")]),a("md-option",{attrs:{value:"2"}},[e._v("Perfer not to say")])],1)],1)],1),a("md-card-content",{staticClass:"content-line"},[a("md-field",{staticClass:"on-select"},[a("label",{staticClass:"select-label"},[e._v("Model")]),a("md-select",{model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.$globalData.modalList,(function(t){return a("md-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1)],1),a("div",{staticClass:"col-2 start-from-bottom"},[a("md-card-content",{staticClass:"content-line"},[a("md-field",{staticClass:"content-field"},[a("label",{staticClass:"content-field-label"},[e._v("Website")]),a("md-textarea",{attrs:{"md-autogrow":""},model:{value:e.website,callback:function(t){e.website=t},expression:"website"}})],1)],1),a("md-card-content",{staticClass:"content-line"},[a("md-field",{staticClass:"content-field"},[a("label",{staticClass:"content-field-label"},[e._v("Phone")]),a("md-textarea",{attrs:{"md-autogrow":""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1),a("md-card-content",{staticClass:"content-line"},[a("md-field",{staticClass:"content-field"},[a("label",{staticClass:"content-field-label"},[e._v("Email")]),a("md-textarea",{attrs:{"md-autogrow":""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1)],1)]),a("md-card-content",{staticClass:"content-line"},[a("md-field",{staticClass:"content-field"},[a("label",{staticClass:"content-field-label"},[e._v("Description")]),a("md-textarea",{attrs:{"md-autogrow":""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1),a("md-card-content",{staticClass:"content-line"},[a("md-field",{staticClass:"content-field"},[a("label",{staticClass:"content-field-label"},[e._v("Education")]),a("md-textarea",{attrs:{"md-autogrow":""},model:{value:e.education,callback:function(t){e.education=t},expression:"education"}})],1)],1),a("md-card-content",{staticClass:"content-line"},[a("md-field",{staticClass:"content-field"},[a("label",{staticClass:"content-field-label"},[e._v("Experience")]),a("md-textarea",{attrs:{"md-autogrow":""},model:{value:e.experience,callback:function(t){e.experience=t},expression:"experience"}})],1)],1),a("md-card-actions",[a("md-button",{staticClass:"md-raised",on:{click:function(t){return e.getProfileData()}}},[e._v("Discard")]),a("md-button",{staticClass:"md-raised md-primary card-action-margin",on:{click:function(t){return e.profileUpdate()}}},[e._v("Save")])],1)],1),a("md-snackbar",{attrs:{"md-duration":4e3,"md-active":e.showSaveSnackbar},on:{"update:mdActive":function(t){e.showSaveSnackbar=t},"update:md-active":function(t){e.showSaveSnackbar=t}}},[a("span",[e._v(" "+e._s(e.updateProfileSuccess?"Your profile has been successfully updated":"Connection timeout. please retry or try to login again.")+" ")]),e.updateProfileSuccess?e._e():a("md-button",{staticClass:"retry-button",on:{click:function(t){return e.profileUpdate()}}},[e._v("Retry")])],1)],1)}),k=[],C={name:"Profile",data:function(){return{_id:"",currentPage:"MyCards",showNavigation:!1,showSidepanel:!1,profile:null,image:"",state:"profile",firstname:"",lastname:"",description:"",experience:"",education:"",model:"",username:"",website:"",phone:"",dialogUser:null,email:"",gender:0,showSnackbar:!1,isInfinity:!1,onEditName:!1,updateProfileSuccess:!0,showSaveSnackbar:!1,showLogoutMessage:!1,logoutUnsuccess:!1}},created:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getProfileData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{logOut:function(){var e=this;console.log(this.$cookies),this.$cookies.keys().forEach((function(t){return e.$cookies.remove(t)})),this.toLogin()},onConfirmLogout:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$globalConfig.baseUrl+"/user/logout",{},{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+e.$cookies.get("token")}});case 2:a=t.sent,200==a.status?e.logOut():e.logoutUnsuccess=!0;case 4:case"end":return t.stop()}}),t)})))()},getProfileData:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$cookies.get("_id"),r=e.$cookies.get("token"),null!=r&&null!=a){t.next=6;break}return e.isInfinity=!0,e.showSnackbar=!0,t.abrupt("return");case 6:return t.prev=6,t.next=9,e.$http.post(e.$globalConfig.baseUrl+"/profile/get?_id="+a,{_id:a});case 9:s=t.sent.data,Object.assign(e.$globalData.userData,s),o=e.$globalData.userData,e.username=o.username,e._id=o._id,e.profile=o.profile,e.model=o.model,e.website=o.website,e.phone=o.phone,e.email=o.email,e.firstname=o.firstname,e.lastname=o.lastname,e.description=o.description,e.experience=o.experience,e.education=o.education,e.gender=null!==(i=o.gender)&&void 0!==i?i:2,t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](6),e.isInfinity=!1,e.showSnackbar=!0;case 31:case"end":return t.stop()}}),t,null,[[6,27]])})))()},toLogin:function(){"Login"!=this.currentPage&&(this.currentPage="Login",this.$router.push("/"))},onRetry:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getProfileData();case 2:case"end":return t.stop()}}),t)})))()},handleImageUpload:function(){this.image=this.$refs.imageUpload.files[0],this.submitFile()},submitFile:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("file",e.image),t.prev=2,t.next=5,e.$http.post(e.$globalConfig.baseUrl+"/upload",a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+e.$cookies.get("token")}});case 5:r=t.sent,e.profile=r.data.path,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),e.isInfinity=!1,e.showSnackbar=!0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},profileUpdate:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.showSaveSnackbar=!1,a={_id:e._id,username:e.username,profile:e.profile,firstname:e.firstname,lastname:e.lastname,description:e.description,experience:e.experience,education:e.education,gender:parseInt(e.gender),phone:e.phone,website:e.website,email:e.email,model:e.model},console.log(a),t.next=6,e.$http.post(e.$globalConfig.baseUrl+"/profile/update",a,{headers:{Authorization:"Bearer "+e.$cookies.get("token")}});case 6:e.updateProfileSuccess=!0,e.showSaveSnackbar=!0,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),e.updateProfileSuccess=!1,e.showSaveSnackbar=!0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},x=C,U=(a("6704"),Object(c["a"])(x,w,k,!1,null,"6d5c7b46",null)),D=U.exports,F=function(){var e=this,t=this,a=t.$createElement,r=t._self._c||a;return r("div",[t.historyList?t._e():r("div",{staticClass:"card-container"},t._l(Array.from({length:9},(function(e,t){return t})),(function(e){return r("md-card",{key:e,staticClass:"card"},[r("md-card-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),r("md-card-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),r("md-card-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),r("md-card-actions",[r("md-button",{staticClass:"md-icon-button"},[r("md-icon",[t._v("favorite")])],1),r("md-button",{staticClass:"md-icon-button"},[r("md-icon",[t._v("delete")])],1)],1)],1)})),1),t.historyList?r("div",{staticClass:"card-container"},[r("md-dialog",{attrs:{"md-active":t.showDetailDialog,"md-fullscreen":!1},on:{"update:mdActive":function(e){t.showDetailDialog=e},"update:md-active":function(e){t.showDetailDialog=e},"md-closed":function(){e.dialogUser=null}}},[r("md-dialog-content",{staticClass:"md-scrollbar"},[t.dialogUser?r("md-dialog-title",[t.dialogUser?r("div",{staticClass:"md-dialog-title-left"},[r("div",{staticClass:"md-title"},[t._v(t._s(t.dialogUser.firstname)+" "+t._s(t.dialogUser.lastname))]),r("div",{staticClass:"md-subhead"},[t._v("@"+t._s(t.dialogUser.username))])]):t._e(),t.dialogUser?r("img",{staticClass:"profile-image md-dialog-title-right",attrs:{src:t.dialogUser.profile}}):t._e(),t.dialogUser?t._e():r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1):t._e(),r("md-divider"),t.dialogUser?r("md-content",[r("label",{staticClass:"md-body-2"},[t._v("Gender:")]),0==t.dialogUser.gender?r("span",[t._v("Male")]):t._e(),1==t.dialogUser.gender?r("span",[t._v("Female")]):t._e(),2==t.dialogUser.gender?r("span",[t._v("Perfer not to say")]):t._e()]):t._e(),t.dialogUser?r("md-content",[r("label",{staticClass:"md-body-2"},[t._v("Model:")]),t._v(" "+t._s(t.dialogUser.model)+" ")]):t._e(),t.dialogUser&&t.dialogUser.email?r("md-content",[r("span",{staticClass:"md-body-2"},[t._v("Email:")]),t._v(" "+t._s(t.dialogUser.email)+" ")]):t._e(),t.dialogUser&&t.dialogUser.website?r("md-content",[r("span",{staticClass:"md-body-2"},[t._v("Website:")]),r("a",{attrs:{href:t.dialogUser.website}},[t._v(t._s(t.dialogUser.website))])]):t._e(),t.dialogUser&&t.dialogUser.phone?r("md-content",[r("span",{staticClass:"md-body-2"},[t._v("Phone:")]),t._v(" "+t._s(t.dialogUser.phone)+" ")]):t._e(),t.dialogUser&&""!=t.dialogUser.description?r("md-content",[r("label",{staticClass:"md-body-2"},[t._v("Description:")]),r("p",[t._v(t._s(t.dialogUser.description))])]):t._e(),t.dialogUser&&""!=t.dialogUser.experience?r("md-content",[r("label",{staticClass:"md-body-2"},[t._v("Experience:")]),r("p",[t._v(t._s(t.dialogUser.experience))])]):t._e(),t.dialogUser&&""!=t.dialogUser.education?r("md-content",[r("label",{staticClass:"md-body-2"},[t._v("Education:")]),r("p",[t._v(t._s(t.dialogUser.education))])]):t._e(),t.dialogUser?t._e():r("md-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),t.dialogUser?t._e():r("md-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),t.dialogUser?t._e():r("md-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),r("md-dialog-actions",[t.dialogUser&&!t.dialogUser.isFav?r("md-button",{staticClass:"md-icon-button",on:{click:function(e){return t.onFavourite_History(t.dialogUser,t.dialogUser._id)}}},[r("md-icon",[t._v("favorite_border")])],1):t._e(),t.dialogUser&&t.dialogUser.isFav?r("md-button",{staticClass:"md-icon-button",on:{click:function(e){return t.onNotFavourite_History(t.dialogUser,t.dialogUser._id)}}},[r("md-icon",[t._v("favorite")])],1):t._e(),r("md-button",{staticClass:"md-icon-button",on:{click:function(e){return t.showDeleteDialog_History(t.dialogUser._id)}}},[r("md-icon",[t._v("delete")])],1),r("md-button",{staticClass:"md-primary",on:{click:function(e){t.showDetailDialog=!1}}},[t._v("Close")])],1)],1)],1),r("md-dialog-confirm",{attrs:{"md-active":t.confirmDeleteUser_History,"md-title":"Do you whant to delete this user?","md-confirm-text":"Delete","md-cancel-text":"Cancel"},on:{"update:mdActive":function(e){t.confirmDeleteUser_History=e},"update:md-active":function(e){t.confirmDeleteUser_History=e},"md-confirm":t.onConfirmDelete_History}}),r("div",{staticClass:"search-field"},[r("md-field",[r("label",[t._v("Search")]),r("md-input",{on:{input:function(e){return t.searchOnChange_History()}},model:{value:t.searchText_History,callback:function(e){t.searchText_History="string"===typeof e?e.trim():e},expression:"searchText_History"}}),r("md-icon",[t._v("search")])],1)],1),0==t.historyDisplayList.length?r("md-empty-state",{staticStyle:{"margin-top":"30px"},attrs:{"md-icon":"history","md-label":"No history yet","md-description":"When you scans an AR Card, it will be automatically added to your history list, and sync across your devices!"}}):t._e(),t._l(t.historyDisplayList.slice(t.historyPageNumber*t.cards_per_page,t.historyPageNumber*t.cards_per_page+t.cards_per_page>=t.historyDisplayList.length?t.historyDisplayList.length:t.historyPageNumber*t.cards_per_page+t.cards_per_page),(function(e){return r("md-card",{key:e._id,staticClass:"card",attrs:{"md-with-hover":""}},[r("div",{on:{click:function(a){return t.showUserDetail_History(e)}}},[r("md-card-header",[r("md-card-header-text",[r("div",{staticClass:"md-title"},[t._v(t._s(e.name))]),r("div",{staticClass:"md-subhead"},[t._v("@"+t._s(e.username))])]),r("md-card-media",[r("img",{attrs:{src:e.profile,alt:"People"}})])],1)],1),r("md-card-actions",[e.isFav?r("md-button",{staticClass:"md-icon-button",on:{click:function(a){return t.onNotFavourite_History(e,e.userid)}}},[r("md-icon",[t._v("favorite")])],1):t._e(),e.isFav?t._e():r("md-button",{staticClass:"md-icon-button",on:{click:function(a){return t.onFavourite_History(e,e.userid)}}},[r("md-icon",[t._v("favorite_border")])],1),r("md-button",{staticClass:"md-icon-button",on:{click:function(a){return t.showDeleteDialog_History(e.userid)}}},[r("md-icon",[t._v("delete")])],1)],1)],1)})),r("div",{staticClass:"page-list-numbers"},t._l(Array.from({length:t.historyPageMaximum},(function(e,t){return t})),(function(e){return r("a",{key:e,staticClass:"page-list-number-each",on:{click:function(a){t.historyPageNumber=e}}},[t._v(t._s(e))])})),0)],2):t._e(),r("md-snackbar",{attrs:{"md-duration":1e3,"md-active":t.showHistorySnackbar},on:{"update:mdActive":function(e){t.showHistorySnackbar=e},"update:md-active":function(e){t.showHistorySnackbar=e}}},[r("span",[t._v(t._s(t.historySnackbarMessage))])])],1)},S=[],$=(a("c975"),a("d81d"),a("a434"),a("b0c0"),a("ac1f"),a("466d"),a("b85c")),P={name:"HistoryList",data:function(){return{historyList:null,showDetailDialog:!1,onRequest:!1,showHistorySnackbar:!1,historySnackbarMessage:"",confirmDeleteUser_History:!1,onDeleteUserID:null,historyDisplayList:null,historyPageNumber:0,historyPageMaximum:0,searchText_History:"",searching_History:!1,cards_per_page:9,dialogUser:null}},created:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.fetchHistoryList();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{fetchHistoryList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get(e.$globalConfig.baseUrl+"/history/get",{headers:{Authorization:"Bearer "+e.$cookies.get("token")}});case 3:a=t.sent,t.next=15;break;case 6:if(t.prev=6,t.t0=t["catch"](0),401!=t.t0.response.status){t.next=13;break}return e.$router.go(-1),t.abrupt("return");case 13:return e.fetchHistoryList(),t.abrupt("return");case 15:e.historyList=a.data.list,e.historyDisplayList=a.data.list,r=e.historyList.length/e.cards_per_page,Math.floor(r)<r?e.historyPageMaximum=Math.floor(r)+1:e.historyPageMaximum=Math.floor(r);case 19:case"end":return t.stop()}}),t,null,[[0,6]])})))()},showUserDetail_History:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.userid,t.showDetailDialog=!0,a.next=4,t.$http.post(t.$globalConfig.baseUrl+"/profile/get?_id="+r);case 4:i=a.sent,setTimeout((function(){t.dialogUser=i.data,t.dialogUser.isFav=e.isFav}),1e3),console.log(i.data);case 7:case"end":return a.stop()}}),a)})))()},onFavourite_History:function(e,t){var a=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("favourite"),console.log(t),e.prev=2,e.next=5,a.$http.post(a.$globalConfig.baseUrl+"/favorite/add",{userid:t},{headers:{Authorization:"Bearer "+a.$cookies.get("token")}});case 5:r=e.sent,console.log(r),200==r.status?(a.historySnackbarMessage="Added to favourite",a.showHistorySnackbar=!0,a.dialogUser&&(a.dialogUser.isFav=!0),a.historyList.map((function(e,r){e.userid?e.userid==t&&(a.historyList[r].isFav=!0):e._id==t&&(a.historyList[r].isFav=!0)}))):(a.historySnackbarMessage="Fail to add to favourite",a.showHistorySnackbar=!0),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](2),a.historySnackbarMessage="Fail to add to favourite",a.showHistorySnackbar=!0,console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()},onNotFavourite_History:function(e,t){var a=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("not favourite"),console.log(t),e.prev=2,e.next=5,a.$http.post(a.$globalConfig.baseUrl+"/favorite/remove",{userid:t},{headers:{Authorization:"Bearer "+a.$cookies.get("token")}});case 5:r=e.sent,200==r.status?(a.historySnackbarMessage="User removed from favourite",a.showHistorySnackbar=!0,a.dialogUser&&(a.dialogUser.isFav=!1),a.historyList.map((function(e,r){e.userid?e.userid==t&&(a.historyList[r].isFav=!1):e._id==t&&(a.historyList[r].isFav=!1)})),console.log(r)):(a.historySnackbarMessage="Fail to remove from favourite",a.showHistorySnackbar=!0),e.next=14;break;case 9:e.prev=9,e.t0=e["catch"](2),a.historySnackbarMessage="Fail to remove from favourite",a.showHistorySnackbar=!0,console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))()},showDeleteDialog_History:function(e){console.log(e),this.onDeleteUserID=e,this.confirmDeleteUser_History=!0},deleteFromHistory:function(e){var t,a=-1,r=Object($["a"])(this.historyList);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.userid==e&&(a=this.historyList.indexOf(i))}}catch(s){r.e(s)}finally{r.f()}-1!=a?(this.historyList.splice(a,1),this.searchOnChange_History(),this.showDetailDialog=!1,this.historySnackbarMessage="The user is successfully deleted",this.showHistorySnackbar=!0):(this.historySnackbarMessage="Fail to delete this user",this.showHistorySnackbar=!0)},onConfirmDelete_History:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post(e.$globalConfig.baseUrl+"/history/remove",{userid:e.onDeleteUserID},{headers:{Authorization:"Bearer "+e.$cookies.get("token")}});case 3:a=t.sent,200==a.status?(console.log(a),e.deleteFromHistory(e.onDeleteUserID)):(e.historySnackbarMessage="Fail to delete this user",e.showHistorySnackbar=!0),e.onDeleteUserID=null,t.next=14;break;case 8:t.prev=8,t.t0=t["catch"](0),e.onDeleteUserID=null,console.log(t.t0),e.historySnackbarMessage="Fail to delete this user",e.showHistorySnackbar=!0;case 14:case"end":return t.stop()}}),t,null,[[0,8]])})))()},onCancelDelete_History:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.onDeleteUserID=null;case 1:case"end":return t.stop()}}),t)})))()},searchOnChange_History:function(){var e=this;if(!this.searching_History){this.searching_History=!0,this.historyPageNumber=0;var t=this.searchText_History.toLowerCase();this.historyDisplayList=this.historyList.filter((function(a){return""==e.searchText_History||(!!a.name.toLowerCase().match(t)||(!!a.userid.toLowerCase().match(t)||!!a.username.toLowerCase().match(t)))})),this.searching_History=!1}}}},L=P,M=(a("c931"),Object(c["a"])(L,F,S,!1,null,"66f1d054",null)),R=M.exports,O=function(){var e=this,t=this,a=t.$createElement,r=t._self._c||a;return r("div",[t.favouriteList?t._e():r("div",{staticClass:"card-container"},t._l(Array.from({length:9},(function(e,t){return t})),(function(e){return r("md-card",{key:e,staticClass:"card"},[r("md-card-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),r("md-card-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),r("md-card-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),r("md-card-actions",[r("md-button",{staticClass:"md-icon-button"},[r("md-icon",[t._v("favorite")])],1)],1)],1)})),1),t.favouriteList?r("div",{staticClass:"card-container"},[r("md-dialog",{attrs:{"md-active":t.showDetailDialog,"md-fullscreen":!1},on:{"update:mdActive":function(e){t.showDetailDialog=e},"update:md-active":function(e){t.showDetailDialog=e},"md-closed":function(){e.dialogUser=null}}},[r("md-dialog-content",{staticClass:"md-scrollbar"},[t.dialogUser?r("md-dialog-title",[t.dialogUser?r("div",{staticClass:"md-dialog-title-left"},[r("div",{staticClass:"md-title"},[t._v(t._s(t.dialogUser.firstname)+" "+t._s(t.dialogUser.lastname))]),r("div",{staticClass:"md-subhead"},[t._v("@"+t._s(t.dialogUser.username))])]):t._e(),t.dialogUser?r("img",{staticClass:"profile-image md-dialog-title-right",attrs:{src:t.dialogUser.profile}}):t._e(),t.dialogUser?t._e():r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1):t._e(),r("md-divider"),t.dialogUser?r("md-content",[r("label",{staticClass:"md-body-2"},[t._v("Gender:")]),0==t.dialogUser.gender?r("span",[t._v("Male")]):t._e(),1==t.dialogUser.gender?r("span",[t._v("Female")]):t._e(),2==t.dialogUser.gender?r("span",[t._v("Perfer not to say")]):t._e()]):t._e(),t.dialogUser?r("md-content",[r("label",{staticClass:"md-body-2"},[t._v("Model:")]),t._v(" "+t._s(t.dialogUser.model)+" ")]):t._e(),t.dialogUser&&t.dialogUser.email?r("md-content",[r("span",{staticClass:"md-body-2"},[t._v("Email:")]),t._v(" "+t._s(t.dialogUser.email)+" ")]):t._e(),t.dialogUser&&t.dialogUser.website?r("md-content",[r("span",{staticClass:"md-body-2"},[t._v("Website:")]),r("a",{attrs:{href:t.dialogUser.website}},[t._v(t._s(t.dialogUser.website))])]):t._e(),t.dialogUser&&t.dialogUser.phone?r("md-content",[r("span",{staticClass:"md-body-2"},[t._v("Phone:")]),t._v(" "+t._s(t.dialogUser.phone)+" ")]):t._e(),t.dialogUser&&""!=t.dialogUser.description?r("md-content",[r("label",{staticClass:"md-body-2"},[t._v("Description:")]),r("p",[t._v(t._s(t.dialogUser.description))])]):t._e(),t.dialogUser&&""!=t.dialogUser.experience?r("md-content",[r("label",{staticClass:"md-body-2"},[t._v("Experience:")]),r("p",[t._v(t._s(t.dialogUser.experience))])]):t._e(),t.dialogUser&&""!=t.dialogUser.education?r("md-content",[r("label",{staticClass:"md-body-2"},[t._v("Education:")]),r("p",[t._v(t._s(t.dialogUser.education))])]):t._e(),t.dialogUser?t._e():r("md-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),t.dialogUser?t._e():r("md-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),t.dialogUser?t._e():r("md-content",[r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1),r("md-dialog-actions",[t.dialogUser&&!t.dialogUser.isFav?r("md-button",{staticClass:"md-icon-button",on:{click:function(e){return t.onFavourite_Favourite(t.dialogUser,t.dialogUser._id)}}},[r("md-icon",[t._v("favorite_border")])],1):t._e(),t.dialogUser&&t.dialogUser.isFav?r("md-button",{staticClass:"md-icon-button",on:{click:function(e){return t.onNotFavourite_Favourite(t.dialogUser,t.dialogUser._id)}}},[r("md-icon",[t._v("favorite")])],1):t._e(),r("md-button",{staticClass:"md-primary",on:{click:function(e){t.showDetailDialog=!1}}},[t._v("Close")])],1)],1)],1),r("md-dialog-confirm",{attrs:{"md-active":t.confirmDeleteUser_Favourite,"md-title":"Do you whant to delete this user?","md-confirm-text":"Yes","md-cancel-text":"Cancel"},on:{"update:mdActive":function(e){t.confirmDeleteUser_Favourite=e},"update:md-active":function(e){t.confirmDeleteUser_Favourite=e},"md-confirm":t.onConfirmDelete_Favourite}}),r("div",{staticClass:"search-field"},[r("md-field",[r("label",[t._v("Search")]),r("md-input",{on:{input:function(e){return t.searchOnChange_Favourite()}},model:{value:t.searchText_Favourite,callback:function(e){t.searchText_Favourite="string"===typeof e?e.trim():e},expression:"searchText_Favourite"}}),r("md-icon",[t._v("search")])],1)],1),0==t.favouriteDisplayList.length?r("md-empty-state",{staticStyle:{"margin-top":"30px"},attrs:{"md-icon":"favorite_border","md-label":"No favorites yet","md-description":"Add a card to your favourites when viewing that card or in the history list, sync it everywhere."}}):t._e(),t._l(t.favouriteDisplayList.slice(t.favouritePageNumber*t.cards_per_page,t.favouritePageNumber*t.cards_per_page+t.cards_per_page>=t.favouriteList.length?t.favouriteList.length:t.favouritePageNumber*t.cards_per_page+t.cards_per_page),(function(e){return r("md-card",{key:e._id,staticClass:"card",attrs:{"md-with-hover":""}},[r("div",{on:{click:function(a){return t.showUserDetail_Favourite(e)}}},[r("md-card-header",[r("md-card-header-text",[r("div",{staticClass:"md-title"},[t._v(t._s(e.name))]),r("div",{staticClass:"md-subhead"},[t._v("@"+t._s(e.username))])]),r("md-card-media",[r("img",{attrs:{src:e.profile,alt:"People"}})])],1)],1),r("md-card-actions",[e.isFav?r("md-button",{staticClass:"md-icon-button",on:{click:function(a){return t.onNotFavourite_Favourite(e,e.userid)}}},[r("md-icon",[t._v("favorite")])],1):t._e(),e.isFav?t._e():r("md-button",{staticClass:"md-icon-button",on:{click:function(a){return t.onFavourite_Favourite(e,e.userid)}}},[r("md-icon",[t._v("favorite_border")])],1)],1)],1)})),r("div",{staticClass:"page-list-numbers"},t._l(Array.from({length:t.favouritePageMaximum},(function(e,t){return t})),(function(e){return r("a",{key:e,staticClass:"page-list-number-each",on:{click:function(a){t.favouritePageNumber=e}}},[t._v(t._s(e))])})),0)],2):t._e(),r("md-snackbar",{attrs:{"md-duration":1e3,"md-active":t.showFavouriteSnackbar},on:{"update:mdActive":function(e){t.showFavouriteSnackbar=e},"update:md-active":function(e){t.showFavouriteSnackbar=e}}},[r("span",[t._v(t._s(t.favouriteSnackbarMessage))])])],1)},H=[],j={name:"FavouriteList",data:function(){return{favouriteList:null,favouriteDisplayList:null,showFavouriteSnackbar:!1,favouriteSnackbarMessage:"",confirmDeleteUser_Favourite:!1,favouritePageNumber:0,favouritePageMaximum:0,searchText_Favourite:"",searching_Favourite:!1,dialogUser:null,showDetailDialog:!1,cards_per_page:9}},created:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchFavouriteList();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{fetchFavouriteList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get(e.$globalConfig.baseUrl+"/favorite/get",{headers:{Authorization:"Bearer "+e.$cookies.get("token")}});case 3:a=t.sent,t.next=15;break;case 6:if(t.prev=6,t.t0=t["catch"](0),401!=t.t0.response.status){t.next=13;break}return e.$router.go(-1),t.abrupt("return");case 13:return e.fetchFavouriteList(),t.abrupt("return");case 15:console.log(a),e.favouriteList=a.data.list,e.favouriteDisplayList=a.data.list,r=e.favouriteList.length/e.cards_per_page,Math.floor(r)<r?e.favouritePageMaximum=Math.floor(r)+1:e.favouritePageMaximum=Math.floor(r);case 20:case"end":return t.stop()}}),t,null,[[0,6]])})))()},showUserDetail_Favourite:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.userid,t.showDetailDialog=!0,a.next=4,t.$http.post(t.$globalConfig.baseUrl+"/profile/get?_id="+r);case 4:i=a.sent,setTimeout((function(){t.dialogUser=i.data,t.dialogUser.isFav=e.isFav}),1e3),console.log(i.data);case 7:case"end":return a.stop()}}),a)})))()},deleteFromFavourite:function(e){var t,a=-1,r=Object($["a"])(this.favouriteList);try{for(r.s();!(t=r.n()).done;){var i=t.value;console.log(i.userid+e),i.userid==e&&(a=this.favouriteList.indexOf(i))}}catch(s){r.e(s)}finally{r.f()}-1!=a?(this.favouriteList.splice(a,1),this.searchOnChange_Favourite(),this.showDetailDialog=!1,this.favouriteSnackbarMessage="User removed from favourite",this.showFavouriteSnackbar=!0):(console.log("removeIndex == -1"),this.favouriteSnackbarMessage="Fail to remove from favourite",this.showFavouriteSnackbar=!0)},onNotFavourite_Favourite:function(e,t){var a=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("not favourite"),console.log(t),e.prev=2,e.next=5,a.$http.post(a.$globalConfig.baseUrl+"/favorite/remove",{userid:t},{headers:{Authorization:"Bearer "+a.$cookies.get("token")}});case 5:r=e.sent,200==r.status?a.deleteFromFavourite(t):(console.log("response != 200"),a.favouriteSnackbarMessage="Fail to remove from favourite",a.showFavouriteSnackbar=!0),e.next=14;break;case 9:e.prev=9,e.t0=e["catch"](2),a.favouriteSnackbarMessage="Fail to remove from favourite",a.showFavouriteSnackbar=!0,console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))()},onConfirmDelete_Favourite:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post(e.$globalConfig.baseUrl+"/history/remove",{userid:e.onDeleteUserID},{headers:{Authorization:"Bearer "+e.$cookies.get("token")}});case 3:a=t.sent,200==a.status?(console.log(a),e.deleteFromFavourite(e.onDeleteUserID)):(e.favouriteSnackbarMessage="Fail to delete this user",e.showFavouriteSnackbar=!0),e.onDeleteUserID=null,t.next=14;break;case 8:t.prev=8,t.t0=t["catch"](0),e.onDeleteUserID=null,console.log(t.t0),e.favouriteSnackbarMessage="Fail to delete this user",e.showFavouriteSnackbar=!0;case 14:case"end":return t.stop()}}),t,null,[[0,8]])})))()},showDeleteDialog_Favourite:function(e){console.log(e),this.onDeleteUserID=e,this.confirmDeleteUser_Favourite=!0},searchOnChange_Favourite:function(){var e=this;if(!this.searching_Favourite){this.searching_Favourite=!0,this.favouritePageNumber=0;var t=this.searchText_Favourite.toLowerCase();this.favouriteDisplayList=this.favouriteList.filter((function(a){return""==e.searchText_Favourite||(!!a.name.toLowerCase().match(t)||(!!a.userid.toLowerCase().match(t)||!!a.username.toLowerCase().match(t)))})),this.searching_Favourite=!1}}}},N=j,E=(a("4aa1"),Object(c["a"])(N,O,H,!1,null,"48aede19",null)),A=E.exports,I={name:"MyCards",components:{Profile:D,HistoryList:R,FavouriteList:A},data:function(){return{_id:"",currentPage:"MyCards",showNavigation:!1,showSidepanel:!1,profile:null,image:"",state:"profile",firstname:"",lastname:"",description:"",experience:"",education:"",model:"",username:"",website:"",phone:"",dialogUser:null,email:"",gender:0,showSnackbar:!1,isInfinity:!1,onEditName:!1,updateProfileSuccess:!0,showSaveSnackbar:!1,showLogoutMessage:!1,logoutUnsuccess:!1}},created:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getProfileData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{currentComponent:function(){return"profile"==this.state?"Profile":"history"==this.state?"HistoryList":"FavouriteList"}},methods:{toProfile:function(){this.showNavigation=!1,this.state="profile"},toHistory:function(){console.log("to history"),this.showNavigation=!1,this.state="history"},toFavourite:function(){console.log("to favourite"),this.showNavigation=!1,this.state="favourite"},logOut:function(){var e=this;console.log(this.$cookies),this.$cookies.keys().forEach((function(t){return e.$cookies.remove(t)})),this.toLogin()},onConfirmLogout:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$globalConfig.baseUrl+"/user/logout",{},{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+e.$cookies.get("token")}});case 2:a=t.sent,200==a.status?e.logOut():(e.logOut(),e.logoutUnsuccess=!0);case 4:case"end":return t.stop()}}),t)})))()},getProfileData:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$cookies.get("_id"),r=e.$cookies.get("token"),null!=r&&null!=a){t.next=6;break}return e.isInfinity=!0,e.showSnackbar=!0,t.abrupt("return");case 6:return t.prev=6,t.next=9,e.$http.post(e.$globalConfig.baseUrl+"/profile/get?_id="+a,{_id:a});case 9:s=t.sent.data,Object.assign(e.$globalData.userData,s),o=e.$globalData.userData,e.username=o.username,e._id=o._id,e.profile=o.profile,e.model=o.model,e.website=o.website,e.phone=o.phone,e.email=o.email,e.firstname=o.firstname,e.lastname=o.lastname,e.description=o.description,e.experience=o.experience,e.education=o.experience,e.gender=null!==(i=o.gender)&&void 0!==i?i:2,t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](6),e.isInfinity=!1,e.showSnackbar=!0;case 31:case"end":return t.stop()}}),t,null,[[6,27]])})))()},toLogin:function(){if("Login"!=this.currentPage)return this.currentPage="Login",void this.$router.go(-1)},onRetry:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getProfileData();case 2:case"end":return t.stop()}}),t)})))()},handleImageUpload:function(){this.image=this.$refs.imageUpload.files[0],this.submitFile()},submitFile:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("file",e.image),t.prev=2,t.next=5,e.$http.post(e.$globalConfig.baseUrl+"/upload",a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+e.$cookies.get("token")}});case 5:r=t.sent,e.profile=r.data.path,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),e.isInfinity=!1,e.showSnackbar=!0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},profileUpdate:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.showSaveSnackbar=!1,a={_id:e._id,username:e.username,profile:e.profile,firstname:e.firstname,lastname:e.lastname,description:e.description,experience:e.experience,education:e.education,gender:parseInt(e.gender),phone:e.phone,website:e.website,email:e.email,model:e.model},console.log(a),t.next=6,e.$http.post(e.$globalConfig.baseUrl+"/profile/update",a,{headers:{Authorization:"Bearer "+e.$cookies.get("token")}});case 6:e.updateProfileSuccess=!0,e.showSaveSnackbar=!0,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),e.updateProfileSuccess=!1,e.showSaveSnackbar=!0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},B=I,T=(a("6199"),Object(c["a"])(B,_,y,!1,null,"092a1ba7",null)),z=T.exports,W=[{path:"/",name:"login",component:b},{path:"/MyCards",name:"MyCards",component:z}],q=new u["a"]({routes:W}),G=a("43f9"),Y=a.n(G),J=(a("51de"),a("e094"),a("5d61"),a("bc3a")),K=a.n(J),Q=a("2b27"),V=a.n(Q);r["default"].prototype.$http=K.a,r["default"].use(u["a"]),r["default"].use(Y.a),r["default"].use(V.a);var X={baseUrl:"http://ar-card.henryz.cc:8080",install:function(){Object.defineProperty(r["default"].prototype,"$globalConfig",{get:function(){return X}})}};r["default"].use(X);var Z={userData:{},modalList:["ManInSuit","BusinessWomanPFB","TestMale","Luffy","FitFemale","Jiraiya","YodaRigged","BusinessMale","BusinessFemale","SmartMale","UnityChan","SmartFemale"],install:function(){Object.defineProperty(r["default"].prototype,"$globalData",{get:function(){return Z}})}};r["default"].use(Z),r["default"].filter("capitalize",(function(e){return e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""})),new r["default"]({render:function(e){return e(d)},router:q}).$mount("#app")},"5d61":function(e,t,a){},6199:function(e,t,a){"use strict";var r=a("fef9"),i=a.n(r);i.a},6704:function(e,t,a){"use strict";var r=a("cb76"),i=a.n(r);i.a},"6cd1":function(e,t,a){},"79b3":function(e,t,a){},"85ec":function(e,t,a){},c931:function(e,t,a){"use strict";var r=a("6cd1"),i=a.n(r);i.a},cb76:function(e,t,a){},ce40:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"img/logo.1ed9f32f.png"},d80b:function(e,t,a){"use strict";var r=a("79b3"),i=a.n(r);i.a},d8cd:function(e,t,a){"use strict";var r=a("ce40"),i=a.n(r);i.a},fef9:function(e,t,a){}});
//# sourceMappingURL=app.6266c9da.js.map